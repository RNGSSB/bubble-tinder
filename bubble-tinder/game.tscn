[gd_scene load_steps=11 format=3 uid="uid://cahya0186gp0l"]

[ext_resource type="Script" path="res://scripts/game_system.gd" id="1_b86r6"]
[ext_resource type="Script" path="res://scripts/StateMachine.gd" id="2_7kcuf"]
[ext_resource type="Script" path="res://scripts/states/setup.gd" id="3_600sm"]
[ext_resource type="Script" path="res://scripts/states/typing.gd" id="4_gq7kg"]
[ext_resource type="PackedScene" uid="uid://bgfkkk2bdt01r" path="res://setup_UI.tscn" id="4_r0yjy"]
[ext_resource type="Script" path="res://multiplayer_manager.gd" id="6_drphp"]
[ext_resource type="Script" path="res://lobby.gd" id="6_wfmck"]
[ext_resource type="Script" path="res://typing_spawner.gd" id="7_1sytp"]
[ext_resource type="PackedScene" uid="uid://bo1cshuk8ubag" path="res://player_id.tscn" id="7_t2gfb"]
[ext_resource type="PackedScene" uid="uid://c2dxtjhjbdftu" path="res://marioteachestyping.tscn" id="8_yemi3"]

[node name="GAME" type="Node2D" node_paths=PackedStringArray("stateLabel", "timerLabel")]
script = ExtResource("1_b86r6")
stateLabel = NodePath("State")
timerLabel = NodePath("Timer")

[node name="State" type="RichTextLabel" parent="."]
offset_left = 412.0
offset_top = 174.0
offset_right = 808.0
offset_bottom = 214.0
text = "Current State"

[node name="Timer" type="RichTextLabel" parent="."]
offset_left = 472.0
offset_top = 260.0
offset_right = 816.0
offset_bottom = 300.0
text = "time"

[node name="PLAY_UI" parent="." instance=ExtResource("4_r0yjy")]
visible = false
offset_right = 1920.0
offset_bottom = 1080.0

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("initial_state")]
script = ExtResource("2_7kcuf")
initial_state = NodePath("Lobby")

[node name="Lobby" type="Node" parent="StateMachine"]
script = ExtResource("6_wfmck")

[node name="Setup" type="Node" parent="StateMachine"]
script = ExtResource("3_600sm")

[node name="Typing" type="Node" parent="StateMachine"]
script = ExtResource("4_gq7kg")

[node name="Typing Spawner" type="Node" parent="StateMachine/Typing"]
script = ExtResource("7_1sytp")
typing_scene = ExtResource("8_yemi3")

[node name="Player 1 Typing UI" type="Control" parent="StateMachine/Typing/Typing Spawner"]
layout_mode = 3
anchors_preset = 0
offset_right = 640.0
offset_bottom = 1080.0
size_flags_horizontal = 2
size_flags_vertical = 6
mouse_filter = 2

[node name="Player 2 Typing UI2" type="Control" parent="StateMachine/Typing/Typing Spawner"]
layout_mode = 3
anchors_preset = 6
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
offset_left = -640.0
offset_top = -540.0
offset_bottom = 540.0
grow_horizontal = 0
grow_vertical = 2
size_flags_horizontal = 2
size_flags_vertical = 6
mouse_filter = 2

[node name="Multiplayer Manager" type="Node2D" parent="."]
script = ExtResource("6_drphp")
player_ID_scene = ExtResource("7_t2gfb")

[node name="Host" type="Button" parent="Multiplayer Manager"]
offset_left = 9.0
offset_top = 6.0
offset_right = 44.0
offset_bottom = 28.0
text = "Host
"

[node name="Join" type="Button" parent="Multiplayer Manager"]
offset_left = 6.0
offset_top = 45.0
offset_right = 49.0
offset_bottom = 68.0
text = "Join"

[node name="MultiplayerSpawner" type="MultiplayerSpawner" parent="Multiplayer Manager"]
_spawnable_scenes = PackedStringArray("res://player_id.tscn")
spawn_path = NodePath("..")

[connection signal="has_confirmed_both" from="PLAY_UI" to="StateMachine/Setup" method="_on_setup_has_confirmed_both"]
[connection signal="Transitioned" from="StateMachine/Setup" to="PLAY_UI" method="_on_setup_transitioned"]
[connection signal="pressed" from="Multiplayer Manager/Host" to="Multiplayer Manager" method="_on_host_pressed"]
[connection signal="pressed" from="Multiplayer Manager/Join" to="Multiplayer Manager" method="_on_join_pressed"]
